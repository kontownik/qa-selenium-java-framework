plugins {
    id 'java'
}

repositories {
    mavenLocal()
    maven {
        url = 'http://repo.maven.apache.org/maven2'
    }
    gradlePluginPortal()
}

dependencies {
    compile 'org.zaproxy:zap-clientapi:1.6.0'
    compile 'org.apache.logging.log4j:log4j-api:2.11.0'
    compile 'org.apache.logging.log4j:log4j-core:2.11.0'
    compile 'io.github.bonigarcia:webdrivermanager:3.4.0'
    compile 'ru.yandex.qatools.htmlelements:htmlelements-java:1.18'
    compile 'com.pojosontheweb:monte-repack:1.0'
    compile 'ws.schild:jave-core:2.4.6'
    compile 'ws.schild:jave-all-deps:2.6.0'
    compile 'ws.schild:jave-native-linux64:2.4.6'
    compile 'ws.schild:jave-native-linux32:2.4.6'
    compile 'ws.schild:jave-native-osx64:2.4.6'
    compile 'ws.schild:jave-native-win64:2.4.6'
    compile 'ws.schild:jave-native-win32:2.4.6'
    compile 'info.cukes:cucumber-junit:1.2.5'
    compile 'info.cukes:cucumber-java8:1.2.5'
    compile 'info.cukes:cucumber-testng:1.2.5'
    compile 'org.seleniumhq.selenium:selenium-java:3.14.0'
    compile group: 'org.testng', name: 'testng', version: '6.14.3'  //TODO: fix syntax
}

group = 'co.netguru.qa'
version = '1.0'
description = 'java-framework'
sourceCompatibility = '1.8'

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

cleanTest {
    delete fileTree(dir: "${rootDir}/screenshots/", include: "*.png")
    println "Cleaned ${rootDir}/screenshots/"
    delete fileTree(dir: "${rootDir}/logs/", include: "*.html")
    delete fileTree(dir: "${rootDir}/logs/", include: "*.log")
    println "Cleaned ${rootDir}/logs/"
    delete fileTree(dir: "${rootDir}/pageSources/", include: "*.html")
    println "Cleaned ${rootDir}/pageSources/"
    delete fileTree(dir: "${rootDir}/videos/", include: "*.mp4")
    println "Cleaned ${rootDir}/videos/"
}

test {
    useTestNG() {
        useDefaultListeners = true
    }
    testLogging {
        events "PASSED", "FAILED", "SKIPPED"
    }
    reports.html.enabled = false    // turn off Gradle's HTML report
}